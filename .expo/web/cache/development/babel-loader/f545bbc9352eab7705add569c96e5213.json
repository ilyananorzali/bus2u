{"ast":null,"code":"var exhaustiveCheck = function exhaustiveCheck(a) {\n  throw new Error(\"Unexhaustive handling for \" + a);\n};\n\nvar identityMatrix = [[1, 0, 0], [0, 1, 0], [0, 0, 1]];\n\nvar translateXMatrix = function () {\n  var _f = function _f(x) {\n    return [[1, 0, x], [0, 1, 0], [0, 0, 1]];\n  };\n\n  _f._closure = {};\n  _f.asString = \"function translateXMatrix(x){return[[1,0,x],[0,1,0],[0,0,1]];}\";\n  _f.__workletHash = 17400578140087;\n  _f.__location = \"C:\\\\Users\\\\Asus\\\\Desktop\\\\bus2u\\\\BUS2U-main\\\\node_modules\\\\react-native-redash\\\\lib\\\\module\\\\Matrix3.js (1:164)\";\n\n  global.__reanimatedWorkletInit(_f);\n\n  return _f;\n}();\n\nvar translateYMatrix = function () {\n  var _f = function _f(y) {\n    return [[1, 0, 0], [0, 1, y], [0, 0, 1]];\n  };\n\n  _f._closure = {};\n  _f.asString = \"function translateYMatrix(y){return[[1,0,0],[0,1,y],[0,0,1]];}\";\n  _f.__workletHash = 7111432453526;\n  _f.__location = \"C:\\\\Users\\\\Asus\\\\Desktop\\\\bus2u\\\\BUS2U-main\\\\node_modules\\\\react-native-redash\\\\lib\\\\module\\\\Matrix3.js (1:258)\";\n\n  global.__reanimatedWorkletInit(_f);\n\n  return _f;\n}();\n\nvar scaleMatrix = function () {\n  var _f = function _f(s) {\n    return [[s, 0, 0], [0, s, 0], [0, 0, 1]];\n  };\n\n  _f._closure = {};\n  _f.asString = \"function scaleMatrix(s){return[[s,0,0],[0,s,0],[0,0,1]];}\";\n  _f.__workletHash = 7200757641938;\n  _f.__location = \"C:\\\\Users\\\\Asus\\\\Desktop\\\\bus2u\\\\BUS2U-main\\\\node_modules\\\\react-native-redash\\\\lib\\\\module\\\\Matrix3.js (1:347)\";\n\n  global.__reanimatedWorkletInit(_f);\n\n  return _f;\n}();\n\nvar scaleXMatrix = function () {\n  var _f = function _f(s) {\n    return [[s, 0, 0], [0, 1, 0], [0, 0, 1]];\n  };\n\n  _f._closure = {};\n  _f.asString = \"function scaleXMatrix(s){return[[s,0,0],[0,1,0],[0,0,1]];}\";\n  _f.__workletHash = 4550479822216;\n  _f.__location = \"C:\\\\Users\\\\Asus\\\\Desktop\\\\bus2u\\\\BUS2U-main\\\\node_modules\\\\react-native-redash\\\\lib\\\\module\\\\Matrix3.js (1:432)\";\n\n  global.__reanimatedWorkletInit(_f);\n\n  return _f;\n}();\n\nvar scaleYMatrix = function () {\n  var _f = function _f(s) {\n    return [[1, 0, 0], [0, s, 0], [0, 0, 1]];\n  };\n\n  _f._closure = {};\n  _f.asString = \"function scaleYMatrix(s){return[[1,0,0],[0,s,0],[0,0,1]];}\";\n  _f.__workletHash = 5557007096329;\n  _f.__location = \"C:\\\\Users\\\\Asus\\\\Desktop\\\\bus2u\\\\BUS2U-main\\\\node_modules\\\\react-native-redash\\\\lib\\\\module\\\\Matrix3.js (1:518)\";\n\n  global.__reanimatedWorkletInit(_f);\n\n  return _f;\n}();\n\nvar skewXMatrix = function () {\n  var _f = function _f(s) {\n    return [[1, Math.tan(s), 0], [0, 1, 0], [0, 0, 1]];\n  };\n\n  _f._closure = {};\n  _f.asString = \"function skewXMatrix(s){return[[1,Math.tan(s),0],[0,1,0],[0,0,1]];}\";\n  _f.__workletHash = 17179712146175;\n  _f.__location = \"C:\\\\Users\\\\Asus\\\\Desktop\\\\bus2u\\\\BUS2U-main\\\\node_modules\\\\react-native-redash\\\\lib\\\\module\\\\Matrix3.js (1:603)\";\n\n  global.__reanimatedWorkletInit(_f);\n\n  return _f;\n}();\n\nvar skewYMatrix = function () {\n  var _f = function _f(s) {\n    return [[1, 0, 0], [Math.tan(s), 1, 0], [0, 0, 1]];\n  };\n\n  _f._closure = {};\n  _f.asString = \"function skewYMatrix(s){return[[1,0,0],[Math.tan(s),1,0],[0,0,1]];}\";\n  _f.__workletHash = 2812063737566;\n  _f.__location = \"C:\\\\Users\\\\Asus\\\\Desktop\\\\bus2u\\\\BUS2U-main\\\\node_modules\\\\react-native-redash\\\\lib\\\\module\\\\Matrix3.js (1:697)\";\n\n  global.__reanimatedWorkletInit(_f);\n\n  return _f;\n}();\n\nvar rotateZMatrix = function () {\n  var _f = function _f(r) {\n    return [[Math.cos(r), -1 * Math.sin(r), 0], [Math.sin(r), Math.cos(r), 0], [0, 0, 1]];\n  };\n\n  _f._closure = {};\n  _f.asString = \"function rotateZMatrix(r){return[[Math.cos(r),-1*Math.sin(r),0],[Math.sin(r),Math.cos(r),0],[0,0,1]];}\";\n  _f.__workletHash = 7439261267518;\n  _f.__location = \"C:\\\\Users\\\\Asus\\\\Desktop\\\\bus2u\\\\BUS2U-main\\\\node_modules\\\\react-native-redash\\\\lib\\\\module\\\\Matrix3.js (1:793)\";\n\n  global.__reanimatedWorkletInit(_f);\n\n  return _f;\n}();\n\nexport var dot3 = function () {\n  var _f = function _f(row, col) {\n    return row[0] * col[0] + row[1] * col[1] + row[2] * col[2];\n  };\n\n  _f._closure = {};\n  _f.asString = \"function dot3(row,col){return row[0]*col[0]+row[1]*col[1]+row[2]*col[2];}\";\n  _f.__workletHash = 7164972296569;\n  _f.__location = \"C:\\\\Users\\\\Asus\\\\Desktop\\\\bus2u\\\\BUS2U-main\\\\node_modules\\\\react-native-redash\\\\lib\\\\module\\\\Matrix3.js (1:922)\";\n\n  global.__reanimatedWorkletInit(_f);\n\n  return _f;\n}();\nexport var matrixVecMul3 = function () {\n  var _f = function _f(m, v) {\n    return [dot3(m[0], v), dot3(m[1], v), dot3(m[2], v)];\n  };\n\n  _f._closure = {\n    dot3: dot3\n  };\n  _f.asString = \"function matrixVecMul3(m,v){const{dot3}=jsThis._closure;{return[dot3(m[0],v),dot3(m[1],v),dot3(m[2],v)];}}\";\n  _f.__workletHash = 3300734455537;\n  _f.__location = \"C:\\\\Users\\\\Asus\\\\Desktop\\\\bus2u\\\\BUS2U-main\\\\node_modules\\\\react-native-redash\\\\lib\\\\module\\\\Matrix3.js (1:1031)\";\n\n  global.__reanimatedWorkletInit(_f);\n\n  return _f;\n}();\nexport var multiply3 = function () {\n  var _f = function _f(m1, m2) {\n    var col0 = [m2[0][0], m2[1][0], m2[2][0]];\n    var col1 = [m2[0][1], m2[1][1], m2[2][1]];\n    var col2 = [m2[0][2], m2[1][2], m2[2][2]];\n    return [[dot3(m1[0], col0), dot3(m1[0], col1), dot3(m1[0], col2)], [dot3(m1[1], col0), dot3(m1[1], col1), dot3(m1[1], col2)], [dot3(m1[2], col0), dot3(m1[2], col1), dot3(m1[2], col2)]];\n  };\n\n  _f._closure = {\n    dot3: dot3\n  };\n  _f.asString = \"function multiply3(m1,m2){const{dot3}=jsThis._closure;{var col0=[m2[0][0],m2[1][0],m2[2][0]];var col1=[m2[0][1],m2[1][1],m2[2][1]];var col2=[m2[0][2],m2[1][2],m2[2][2]];return[[dot3(m1[0],col0),dot3(m1[0],col1),dot3(m1[0],col2)],[dot3(m1[1],col0),dot3(m1[1],col1),dot3(m1[1],col2)],[dot3(m1[2],col0),dot3(m1[2],col1),dot3(m1[2],col2)]];}}\";\n  _f.__workletHash = 3325142271425;\n  _f.__location = \"C:\\\\Users\\\\Asus\\\\Desktop\\\\bus2u\\\\BUS2U-main\\\\node_modules\\\\react-native-redash\\\\lib\\\\module\\\\Matrix3.js (1:1139)\";\n\n  global.__reanimatedWorkletInit(_f);\n\n  return _f;\n}();\nexport var serializeToSVGMatrix = function () {\n  var _f = function _f(m) {\n    return \"matrix(\" + m[0][0] + \", \" + m[1][0] + \", \" + m[0][1] + \", \" + m[1][1] + \", \" + m[0][2] + \", \" + m[1][2] + \")\";\n  };\n\n  _f._closure = {};\n  _f.asString = \"function serializeToSVGMatrix(m){return\\\"matrix(\\\"+m[0][0]+\\\", \\\"+m[1][0]+\\\", \\\"+m[0][1]+\\\", \\\"+m[1][1]+\\\", \\\"+m[0][2]+\\\", \\\"+m[1][2]+\\\")\\\";}\";\n  _f.__workletHash = 9492201660893;\n  _f.__location = \"C:\\\\Users\\\\Asus\\\\Desktop\\\\bus2u\\\\BUS2U-main\\\\node_modules\\\\react-native-redash\\\\lib\\\\module\\\\Matrix3.js (1:1490)\";\n\n  global.__reanimatedWorkletInit(_f);\n\n  return _f;\n}();\nexport var processTransform2d = function () {\n  var _f = function _f(transforms) {\n    return transforms.reduce(function (acc, transform) {\n      var key = Object.keys(transform)[0];\n      var value = transform[key];\n\n      if (key === \"translateX\") {\n        return multiply3(acc, translateXMatrix(value));\n      }\n\n      if (key === \"translateY\") {\n        return multiply3(acc, translateYMatrix(value));\n      }\n\n      if (key === \"scale\") {\n        return multiply3(acc, scaleMatrix(value));\n      }\n\n      if (key === \"scaleX\") {\n        return multiply3(acc, scaleXMatrix(value));\n      }\n\n      if (key === \"scaleY\") {\n        return multiply3(acc, scaleYMatrix(value));\n      }\n\n      if (key === \"skewX\") {\n        return multiply3(acc, skewXMatrix(value));\n      }\n\n      if (key === \"skewY\") {\n        return multiply3(acc, skewYMatrix(value));\n      }\n\n      if (key === \"rotate\" || key === \"rotateZ\") {\n        return multiply3(acc, rotateZMatrix(value));\n      }\n\n      return exhaustiveCheck(key);\n    }, identityMatrix);\n  };\n\n  _f._closure = {\n    multiply3: multiply3,\n    translateXMatrix: translateXMatrix,\n    translateYMatrix: translateYMatrix,\n    scaleMatrix: scaleMatrix,\n    scaleXMatrix: scaleXMatrix,\n    scaleYMatrix: scaleYMatrix,\n    skewXMatrix: skewXMatrix,\n    skewYMatrix: skewYMatrix,\n    rotateZMatrix: rotateZMatrix,\n    exhaustiveCheck: exhaustiveCheck,\n    identityMatrix: identityMatrix\n  };\n  _f.asString = \"function processTransform2d(transforms){const{multiply3,translateXMatrix,translateYMatrix,scaleMatrix,scaleXMatrix,scaleYMatrix,skewXMatrix,skewYMatrix,rotateZMatrix,exhaustiveCheck,identityMatrix}=jsThis._closure;{return transforms.reduce(function(acc,transform){var key=Object.keys(transform)[0];var value=transform[key];if(key===\\\"translateX\\\"){return multiply3(acc,translateXMatrix(value));}if(key===\\\"translateY\\\"){return multiply3(acc,translateYMatrix(value));}if(key===\\\"scale\\\"){return multiply3(acc,scaleMatrix(value));}if(key===\\\"scaleX\\\"){return multiply3(acc,scaleXMatrix(value));}if(key===\\\"scaleY\\\"){return multiply3(acc,scaleYMatrix(value));}if(key===\\\"skewX\\\"){return multiply3(acc,skewXMatrix(value));}if(key===\\\"skewY\\\"){return multiply3(acc,skewYMatrix(value));}if(key===\\\"rotate\\\"||key===\\\"rotateZ\\\"){return multiply3(acc,rotateZMatrix(value));}return exhaustiveCheck(key);},identityMatrix);}}\";\n  _f.__workletHash = 5990971714349;\n  _f.__location = \"C:\\\\Users\\\\Asus\\\\Desktop\\\\bus2u\\\\BUS2U-main\\\\node_modules\\\\react-native-redash\\\\lib\\\\module\\\\Matrix3.js (1:1658)\";\n\n  global.__reanimatedWorkletInit(_f);\n\n  return _f;\n}();\n\nvar isMatrix3 = function () {\n  var _f = function _f(arg) {\n    return arg.length === 3 && arg[0] instanceof Array;\n  };\n\n  _f._closure = {};\n  _f.asString = \"function isMatrix3(arg){return arg.length===3&&arg[0]instanceof Array;}\";\n  _f.__workletHash = 12093629111814;\n  _f.__location = \"C:\\\\Users\\\\Asus\\\\Desktop\\\\bus2u\\\\BUS2U-main\\\\node_modules\\\\react-native-redash\\\\lib\\\\module\\\\Matrix3.js (1:2402)\";\n\n  global.__reanimatedWorkletInit(_f);\n\n  return _f;\n}();\n\nexport var decompose2d = function () {\n  var _f = function _f(arg) {\n    var m = isMatrix3(arg) ? arg : processTransform2d(arg);\n    var a = m[0][0];\n    var b = m[1][0];\n    var c = m[0][1];\n    var d = m[1][1];\n    var translateX = m[0][2];\n    var translateY = m[1][2];\n    var E = (a + d) / 2;\n    var F = (a - d) / 2;\n    var G = (c + b) / 2;\n    var H = (c - b) / 2;\n    var Q = Math.sqrt(Math.pow(E, 2) + Math.pow(H, 2));\n    var R = Math.sqrt(Math.pow(F, 2) + Math.pow(G, 2));\n    var scaleX = Q + R;\n    var scaleY = Q - R;\n    var a1 = Math.atan2(G, F);\n    var a2 = Math.atan2(H, E);\n    var theta = (a2 - a1) / 2;\n    var phi = (a2 + a1) / 2;\n    return [{\n      translateX: translateX\n    }, {\n      translateY: translateY\n    }, {\n      rotateZ: -1 * theta\n    }, {\n      scaleX: scaleX\n    }, {\n      scaleY: scaleY\n    }, {\n      rotateZ: -1 * phi\n    }];\n  };\n\n  _f._closure = {\n    isMatrix3: isMatrix3,\n    processTransform2d: processTransform2d\n  };\n  _f.asString = \"function decompose2d(arg){const{isMatrix3,processTransform2d}=jsThis._closure;{var m=isMatrix3(arg)?arg:processTransform2d(arg);var a=m[0][0];var b=m[1][0];var c=m[0][1];var d=m[1][1];var translateX=m[0][2];var translateY=m[1][2];var E=(a+d)/2;var F=(a-d)/2;var G=(c+b)/2;var H=(c-b)/2;var Q=Math.sqrt(Math.pow(E,2)+Math.pow(H,2));var R=Math.sqrt(Math.pow(F,2)+Math.pow(G,2));var scaleX=Q+R;var scaleY=Q-R;var a1=Math.atan2(G,F);var a2=Math.atan2(H,E);var theta=(a2-a1)/2;var phi=(a2+a1)/2;return[{translateX:translateX},{translateY:translateY},{rotateZ:-1*theta},{scaleX:scaleX},{scaleY:scaleY},{rotateZ:-1*phi}];}}\";\n  _f.__workletHash = 3303290849428;\n  _f.__location = \"C:\\\\Users\\\\Asus\\\\Desktop\\\\bus2u\\\\BUS2U-main\\\\node_modules\\\\react-native-redash\\\\lib\\\\module\\\\Matrix3.js (1:2507)\";\n\n  global.__reanimatedWorkletInit(_f);\n\n  return _f;\n}();\n\nvar adjugate = function () {\n  var _f = function _f(m) {\n    return [[m[1][1] * m[2][2] - m[1][2] * [2][1], m[0][2] * [2][1] - m[0][1] * [2][2], m[0][1] * [1][2] - m[0][2] * [1][1]], [m[1][2] * [2][0] - m[1][0] * [2][2], m[0][0] * [2][2] - m[0][2] * [2][0], m[0][2] * [1][0] - m[0][0] * [1][2]], [m[1][0] * [2][1] - m[1][1] * [2][0], m[0][1] * [2][0] - m[0][0] * [2][1], m[0][0] * [1][1] - m[0][1] * [1][0]]];\n  };\n\n  _f._closure = {};\n  _f.asString = \"function adjugate(m){return[[m[1][1]*m[2][2]-m[1][2]*[2][1],m[0][2]*[2][1]-m[0][1]*[2][2],m[0][1]*[1][2]-m[0][2]*[1][1]],[m[1][2]*[2][0]-m[1][0]*[2][2],m[0][0]*[2][2]-m[0][2]*[2][0],m[0][2]*[1][0]-m[0][0]*[1][2]],[m[1][0]*[2][1]-m[1][1]*[2][0],m[0][1]*[2][0]-m[0][0]*[2][1],m[0][0]*[1][1]-m[0][1]*[1][0]]];}\";\n  _f.__workletHash = 9109331772211;\n  _f.__location = \"C:\\\\Users\\\\Asus\\\\Desktop\\\\bus2u\\\\BUS2U-main\\\\node_modules\\\\react-native-redash\\\\lib\\\\module\\\\Matrix3.js (1:3093)\";\n\n  global.__reanimatedWorkletInit(_f);\n\n  return _f;\n}();\n\nvar basisToPoints = function () {\n  var _f = function _f(_ref) {\n    var p1 = _ref.p1,\n        p2 = _ref.p2,\n        p3 = _ref.p3,\n        p4 = _ref.p4;\n    var m = [[p1.x, p2.x, p3.x], [p1.y, p2.y, p3.y], [1, 1, 1]];\n    var v = matrixVecMul3(adjugate(m), [p4.x, p4.y, 1]);\n    return multiply3(m, [[v[0], 0, 0], [0, v[1], 0], [0, 0, v[2]]]);\n  };\n\n  _f._closure = {\n    matrixVecMul3: matrixVecMul3,\n    adjugate: adjugate,\n    multiply3: multiply3\n  };\n  _f.asString = \"function basisToPoints(_ref){const{matrixVecMul3,adjugate,multiply3}=jsThis._closure;{var p1=_ref.p1,p2=_ref.p2,p3=_ref.p3,p4=_ref.p4;var m=[[p1.x,p2.x,p3.x],[p1.y,p2.y,p3.y],[1,1,1]];var v=matrixVecMul3(adjugate(m),[p4.x,p4.y,1]);return multiply3(m,[[v[0],0,0],[0,v[1],0],[0,0,v[2]]]);}}\";\n  _f.__workletHash = 15115526798370;\n  _f.__location = \"C:\\\\Users\\\\Asus\\\\Desktop\\\\bus2u\\\\BUS2U-main\\\\node_modules\\\\react-native-redash\\\\lib\\\\module\\\\Matrix3.js (1:3429)\";\n\n  global.__reanimatedWorkletInit(_f);\n\n  return _f;\n}();\n\nexport var transform2d = function () {\n  var _f = function _f(params) {\n    var s = basisToPoints(params.canvas);\n    var d = basisToPoints(params.projected);\n    var t = multiply3(d, adjugate(s));\n    return [[t[0][0] / t[2][2], t[0][1] / t[2][2], t[0][2] / t[2][2]], [t[1][0] / t[2][2], t[1][1] / t[2][2], t[1][2] / t[2][2]], [t[2][0] / t[2][2], t[2][1] / t[2][2], 1]];\n  };\n\n  _f._closure = {\n    basisToPoints: basisToPoints,\n    multiply3: multiply3,\n    adjugate: adjugate\n  };\n  _f.asString = \"function transform2d(params){const{basisToPoints,multiply3,adjugate}=jsThis._closure;{var s=basisToPoints(params.canvas);var d=basisToPoints(params.projected);var t=multiply3(d,adjugate(s));return[[t[0][0]/t[2][2],t[0][1]/t[2][2],t[0][2]/t[2][2]],[t[1][0]/t[2][2],t[1][1]/t[2][2],t[1][2]/t[2][2]],[t[2][0]/t[2][2],t[2][1]/t[2][2],1]];}}\";\n  _f.__workletHash = 4273212888593;\n  _f.__location = \"C:\\\\Users\\\\Asus\\\\Desktop\\\\bus2u\\\\BUS2U-main\\\\node_modules\\\\react-native-redash\\\\lib\\\\module\\\\Matrix3.js (1:3693)\";\n\n  global.__reanimatedWorkletInit(_f);\n\n  return _f;\n}();","map":{"version":3,"sources":["Matrix3.ts"],"names":["exhaustiveCheck","identityMatrix","translateXMatrix","translateYMatrix","scaleMatrix","scaleXMatrix","scaleYMatrix","skewXMatrix","Math","skewYMatrix","rotateZMatrix","dot3","row","col","matrixVecMul3","m","multiply3","col0","m2","col1","col2","m1","serializeToSVGMatrix","processTransform2d","transforms","key","Object","value","transform","isMatrix3","arg","decompose2d","a","b","c","d","translateX","translateY","E","F","G","H","Q","R","scaleX","scaleY","a1","a2","theta","phi","rotateZ","adjugate","basisToPoints","p1","p2","p3","p4","v","transform2d","s","params","t"],"mappings":"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","sourcesContent":["/* eslint-disable prefer-destructuring */\nimport { Vector } from \"./Vectors\";\n\nexport type Vec3 = readonly [number, number, number];\n\nexport type Matrix3 = readonly [Vec3, Vec3, Vec3];\n\ntype Transform2dName =\n  | \"translateX\"\n  | \"translateY\"\n  | \"scale\"\n  | \"skewX\"\n  | \"skewY\"\n  | \"scaleX\"\n  | \"scaleY\"\n  | \"rotateZ\"\n  | \"rotate\";\n\nexport interface TransformProp {\n  transform: Transforms2d;\n}\n\ntype Transformations = {\n  [Name in Transform2dName]: number;\n};\nexport type Transforms2d = (\n  | Pick<Transformations, \"translateX\">\n  | Pick<Transformations, \"translateY\">\n  | Pick<Transformations, \"scale\">\n  | Pick<Transformations, \"scaleX\">\n  | Pick<Transformations, \"scaleY\">\n  | Pick<Transformations, \"skewX\">\n  | Pick<Transformations, \"skewY\">\n  | Pick<Transformations, \"rotate\">\n)[];\n\nconst exhaustiveCheck = (a: never): never => {\n  throw new Error(`Unexhaustive handling for ${a}`);\n};\n\nconst identityMatrix: Matrix3 = [\n  [1, 0, 0],\n  [0, 1, 0],\n  [0, 0, 1],\n];\n\nconst translateXMatrix = (x: number): Matrix3 => {\n  \"worklet\";\n  return [\n    [1, 0, x],\n    [0, 1, 0],\n    [0, 0, 1],\n  ];\n};\n\nconst translateYMatrix = (y: number): Matrix3 => {\n  \"worklet\";\n  return [\n    [1, 0, 0],\n    [0, 1, y],\n    [0, 0, 1],\n  ];\n};\n\nconst scaleMatrix = (s: number): Matrix3 => {\n  \"worklet\";\n  return [\n    [s, 0, 0],\n    [0, s, 0],\n    [0, 0, 1],\n  ];\n};\n\nconst scaleXMatrix = (s: number): Matrix3 => {\n  \"worklet\";\n  return [\n    [s, 0, 0],\n    [0, 1, 0],\n    [0, 0, 1],\n  ];\n};\n\nconst scaleYMatrix = (s: number): Matrix3 => {\n  \"worklet\";\n  return [\n    [1, 0, 0],\n    [0, s, 0],\n    [0, 0, 1],\n  ];\n};\n\nconst skewXMatrix = (s: number): Matrix3 => {\n  \"worklet\";\n  return [\n    [1, Math.tan(s), 0],\n    [0, 1, 0],\n    [0, 0, 1],\n  ];\n};\n\nconst skewYMatrix = (s: number): Matrix3 => {\n  \"worklet\";\n  return [\n    [1, 0, 0],\n    [Math.tan(s), 1, 0],\n    [0, 0, 1],\n  ];\n};\n\nconst rotateZMatrix = (r: number): Matrix3 => {\n  \"worklet\";\n  return [\n    [Math.cos(r), -1 * Math.sin(r), 0],\n    [Math.sin(r), Math.cos(r), 0],\n    [0, 0, 1],\n  ];\n};\n\nexport const dot3 = (row: Vec3, col: Vec3) => {\n  \"worklet\";\n  return row[0] * col[0] + row[1] * col[1] + row[2] * col[2];\n};\n\nexport const matrixVecMul3 = (m: Matrix3, v: Vec3) => {\n  \"worklet\";\n  return [dot3(m[0], v), dot3(m[1], v), dot3(m[2], v)] as const;\n};\n\nexport const multiply3 = (m1: Matrix3, m2: Matrix3) => {\n  \"worklet\";\n  const col0 = [m2[0][0], m2[1][0], m2[2][0]] as const;\n  const col1 = [m2[0][1], m2[1][1], m2[2][1]] as const;\n  const col2 = [m2[0][2], m2[1][2], m2[2][2]] as const;\n  return [\n    [dot3(m1[0], col0), dot3(m1[0], col1), dot3(m1[0], col2)],\n    [dot3(m1[1], col0), dot3(m1[1], col1), dot3(m1[1], col2)],\n    [dot3(m1[2], col0), dot3(m1[2], col1), dot3(m1[2], col2)],\n  ] as const;\n};\n\nexport const serializeToSVGMatrix = (m: Matrix3) => {\n  \"worklet\";\n  return `matrix(${m[0][0]}, ${m[1][0]}, ${m[0][1]}, ${m[1][1]}, ${m[0][2]}, ${m[1][2]})`;\n};\n\nexport const processTransform2d = (transforms: Transforms2d) => {\n  \"worklet\";\n  return transforms.reduce((acc, transform) => {\n    const key = Object.keys(transform)[0] as Transform2dName;\n    const value = (transform as Pick<Transformations, typeof key>)[key];\n    if (key === \"translateX\") {\n      return multiply3(acc, translateXMatrix(value));\n    }\n    if (key === \"translateY\") {\n      return multiply3(acc, translateYMatrix(value));\n    }\n    if (key === \"scale\") {\n      return multiply3(acc, scaleMatrix(value));\n    }\n    if (key === \"scaleX\") {\n      return multiply3(acc, scaleXMatrix(value));\n    }\n    if (key === \"scaleY\") {\n      return multiply3(acc, scaleYMatrix(value));\n    }\n    if (key === \"skewX\") {\n      return multiply3(acc, skewXMatrix(value));\n    }\n    if (key === \"skewY\") {\n      return multiply3(acc, skewYMatrix(value));\n    }\n    if (key === \"rotate\" || key === \"rotateZ\") {\n      return multiply3(acc, rotateZMatrix(value));\n    }\n    return exhaustiveCheck(key);\n  }, identityMatrix);\n};\n\nconst isMatrix3 = (arg: Matrix3 | Transforms2d): arg is Matrix3 => {\n  \"worklet\";\n  return arg.length === 3 && arg[0] instanceof Array;\n};\n\n// https://math.stackexchange.com/questions/13150/extracting-rotation-scale-values-from-2d-transformation-matrix\nexport const decompose2d = (arg: Matrix3 | Transforms2d) => {\n  \"worklet\";\n  const m = isMatrix3(arg) ? arg : processTransform2d(arg);\n  const a = m[0][0];\n  const b = m[1][0];\n  const c = m[0][1];\n  const d = m[1][1];\n  const translateX = m[0][2];\n  const translateY = m[1][2];\n  const E = (a + d) / 2;\n  const F = (a - d) / 2;\n  const G = (c + b) / 2;\n  const H = (c - b) / 2;\n  const Q = Math.sqrt(Math.pow(E, 2) + Math.pow(H, 2));\n  const R = Math.sqrt(Math.pow(F, 2) + Math.pow(G, 2));\n  const scaleX = Q + R;\n  const scaleY = Q - R;\n  const a1 = Math.atan2(G, F);\n  const a2 = Math.atan2(H, E);\n  const theta = (a2 - a1) / 2;\n  const phi = (a2 + a1) / 2;\n  return [\n    { translateX },\n    { translateY },\n    { rotateZ: -1 * theta },\n    { scaleX },\n    { scaleY },\n    { rotateZ: -1 * phi },\n  ] as const;\n};\n\nconst adjugate = (m: Matrix3) => {\n  \"worklet\";\n  return [\n    [\n      m[1][1] * m[2][2] - m[1][2] * [2][1],\n      m[0][2] * [2][1] - m[0][1] * [2][2],\n      m[0][1] * [1][2] - m[0][2] * [1][1],\n    ],\n    [\n      m[1][2] * [2][0] - m[1][0] * [2][2],\n      m[0][0] * [2][2] - m[0][2] * [2][0],\n      m[0][2] * [1][0] - m[0][0] * [1][2],\n    ],\n    [\n      m[1][0] * [2][1] - m[1][1] * [2][0],\n      m[0][1] * [2][0] - m[0][0] * [2][1],\n      m[0][0] * [1][1] - m[0][1] * [1][0],\n    ],\n  ] as const;\n};\n\ninterface Quadrilateral {\n  p1: Vector;\n  p2: Vector;\n  p3: Vector;\n  p4: Vector;\n}\n\ninterface Parameters {\n  canvas: Quadrilateral;\n  projected: Quadrilateral;\n}\n\nconst basisToPoints = ({ p1, p2, p3, p4 }: Quadrilateral) => {\n  \"worklet\";\n  const m = [\n    [p1.x, p2.x, p3.x],\n    [p1.y, p2.y, p3.y],\n    [1, 1, 1],\n  ] as const;\n  const v = matrixVecMul3(adjugate(m), [p4.x, p4.y, 1]);\n  return multiply3(m, [\n    [v[0], 0, 0],\n    [0, v[1], 0],\n    [0, 0, v[2]],\n  ]);\n};\n\n// https://math.stackexchange.com/questions/296794/finding-the-transform-matrix-from-4-projected-points-with-javascript\n// https://franklinta.com/2014/09/08/computing-css-matrix3d-transforms/\n// http://jsfiddle.net/dFrHS/1/\nexport const transform2d = (params: Parameters) => {\n  \"worklet\";\n  const s = basisToPoints(params.canvas);\n  const d = basisToPoints(params.projected);\n  const t = multiply3(d, adjugate(s));\n  return [\n    [t[0][0] / t[2][2], t[0][1] / t[2][2], t[0][2] / t[2][2]],\n    [t[1][0] / t[2][2], t[1][1] / t[2][2], t[1][2] / t[2][2]],\n    [t[2][0] / t[2][2], t[2][1] / t[2][2], 1],\n  ] as const;\n};\n"]},"metadata":{},"sourceType":"module"}